---
phase: 01-floor-enhancement
plan: 02
type: execute
wave: 2
depends_on:
  - "01-01"
files_modified:
  - public/assets/tilemaps/json/room-chatbotruins.json
autonomous: false

must_haves:
  truths:
    - "Side galleries (cols 1-12, 28-38) have reduced checkerboard density"
    - "North sanctuary (rows 2-9) has worn/aged floor with scattered stone blocks"
    - "Zone transitions are visually subtle but perceptible"
  artifacts:
    - path: "public/assets/tilemaps/json/room-chatbotruins.json"
      provides: "Fully enhanced ground layer with all four zones complete"
      contains: "layers[0].data with varied tile patterns across zones"
  key_links:
    - from: "ground layer data array"
      to: "visual tile rendering"
      via: "Phaser tilemap loader"
      pattern: "GID values 65-128 map to stone tileset"
---

<objective>
Complete the floor enhancement by modifying Side Wings and North Sanctuary zones.

Purpose: Finish the visual zone differentiation by: (1) reducing gallery checkerboard density to focus attention on exhibits, and (2) adding worn/aged character to the north sanctuary to suggest ancient ruins.

Output: Fully enhanced room-chatbotruins.json with all four zones complete (Entry, Central Hall, Side Wings, North Sanctuary).
</objective>

<execution_context>
@/Users/noahsark/.claude/get-shit-done/workflows/execute-plan.md
@/Users/noahsark/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-floor-enhancement/01-RESEARCH.md
@.planning/phases/01-floor-enhancement/01-01-SUMMARY.md
@public/assets/tilemaps/json/room-chatbotruins.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Reduce Side Wing Checkerboard Density</name>
  <files>public/assets/tilemaps/json/room-chatbotruins.json</files>
  <action>
Modify the ground layer (layers[0].data) for both side wings to reduce decoration density.

**Zone definitions:**
- West Wing: cols 1-12, rows 2-27
- East Wing: cols 28-38, rows 2-27

**Key tile GIDs:**
- 74: Plain center (primary - use MORE of this)
- 69-70, 77-78: Decorated 2x2 (reduce to 1 per 6x6 area)

**Current problem:** Wings have decorated 2x2 pattern every 4 tiles (too dense).

**Target pattern:** One decorated 2x2 per exhibit alcove, not uniform distribution.

**West Wing modifications (cols 2-11):**

Looking at current data, decorated patterns are at cols 2-3, 6-7, 10-11 on alternating rows.

For each row pair (e.g., rows 2-3, 6-7, 10-11, etc.):
1. KEEP one 2x2 pattern per row pair (e.g., at cols 2-3)
2. REMOVE the other two 2x2 patterns (cols 6-7 and 10-11) by replacing with 74

Rows to modify (even rows have 69-70, odd rows have 77-78):
- Row 2: indices 80-119, keep cols 2-3 decorated, change cols 6-7 and 10-11 to 74
- Row 3: indices 120-159, corresponding 77-78 below 69-70
- Continue pattern for rows 6-7, 10-11, 14-15, 18-19, 22-23, 26-27

**Specific index calculations for West Wing:**
Example: Row 2, col 6 = 2*40 + 6 = 86
- Row 2, cols 6-7: indices 86-87 -> change from 69,70 to 74,74
- Row 2, cols 10-11: indices 90-91 -> change from 69,70 to 74,74
- Row 3, cols 6-7: indices 126-127 -> change from 77,78 to 74,74
- Row 3, cols 10-11: indices 130-131 -> change from 77,78 to 74,74

Repeat for row pairs: 6-7, 10-11, 14-15, 18-19, 22-23, 26-27

**East Wing modifications (cols 27-37):**

Similar pattern - keep one 2x2 per row pair, remove excess.

Current decorated positions: cols 27-28, 31-32, 35-36

Keep cols 35-36 decorated, change cols 27-28 and 31-32 to 74.

Example: Row 2, col 27 = 2*40 + 27 = 107
- Row 2, cols 27-28: indices 107-108 -> change from 69,70 to 74,74
- Row 2, cols 31-32: indices 111-112 -> change from 69,70 to 74,74

Repeat for all row pairs.

**Do NOT modify:**
- Column 0 (left wall edge - 73)
- Column 39 (right wall edge - 75)
- Columns 13-26 (central hall - already handled in Plan 01)
- Exhibits (props layer, untouched)
  </action>
  <verify>
1. Read modified JSON and count decorated tiles in West Wing:
   - Should have ~4-6 decorated 2x2 patterns total (vs ~12+ before)
2. Same check for East Wing
3. Index spot-check: Row 2 col 6 = index 86
  </verify>
  <done>Side wings have reduced decoration density (~50% fewer decorated tiles), making exhibits more prominent.</done>
</task>

<task type="auto">
  <name>Task 2: Add Worn/Aged Character to North Sanctuary</name>
  <files>public/assets/tilemaps/json/room-chatbotruins.json</files>
  <action>
Modify the ground layer (layers[0].data) for the North Sanctuary to suggest ancient, worn stone.

**Zone definition:** Rows 2-9, cols 1-38 (excluding central hall cols 13-27 which have Welcome sign)

**Key tile GIDs for worn effect:**
- 74: Plain center (base)
- 68: Large stone block top-left
- 76: Large stone block bottom-left
- 84: Large stone block (bottom right of 2x2)

**Strategy:** Remove ALL decorated 2x2 patterns (69-70, 77-78) from north sanctuary. Replace with plain 74 and scatter large stone blocks (68, 76) in corners to suggest wear.

**North Sanctuary modifications:**

1. **Remove all dot patterns (rows 2-3, 6-7):**
   Current row 2 has 69-70 at cols 2-3, 6-7, 10-11, 27-28, 31-32, 35-36
   Change ALL to 74.

   Row 2 decorated positions -> 74:
   - Cols 2-3: indices 82-83 -> 74
   - Cols 6-7: indices 86-87 -> 74
   - Cols 10-11: indices 90-91 -> 74
   - Cols 27-28: indices 107-108 -> 74
   - Cols 31-32: indices 111-112 -> 74
   - Cols 35-36: indices 115-116 -> 74

   Row 3 (77-78 below):
   - Same columns, indices = 120 + col
   - All -> 74

   Rows 6-7 same treatment.

2. **Add scattered large stone blocks in corners:**

   Northwest corner (rows 2-4, cols 1-4):
   - Row 2, col 3: index 83 -> change to 68 (large stone TL)
   - Row 3, col 3: index 123 -> change to 76 (large stone BL)

   Northeast corner (rows 2-4, cols 35-38):
   - Row 2, col 36: index 116 -> change to 68
   - Row 3, col 36: index 156 -> change to 76

   Add 1-2 more scattered blocks:
   - Row 5, col 8: index 208 -> change to 68
   - Row 6, col 8: index 248 -> change to 76

3. **Leave rows 8-9 mostly plain** (transition to central hall):
   - Remove any remaining dot patterns
   - Keep as plain 74 for cleaner transition to statue area

**Do NOT modify:**
- Welcome sign area (cols 19-21, rows 1-2 based on objects layer)
- Tree corners (plants layer, untouched)
- Wall edges
  </action>
  <verify>
1. Read modified JSON and verify:
   - Rows 2-7 in sanctuary zones have NO 69-70 or 77-78 tiles
   - Large stone blocks (68, 76) appear at northwest corner, northeast corner
2. Count large stone blocks: should be ~3 pairs (6 tiles total)
3. Index spot-check: Row 2 col 3 = 2*40 + 3 = 83
  </verify>
  <done>North sanctuary has worn/aged appearance with plain stone floor and scattered large blocks suggesting ancient wear. No checkerboard pattern remains in this zone.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual Verification of Complete Floor Enhancement</name>
  <what-built>
Side wings (cols 1-12 and 28-38) enhanced with:
- Reduced checkerboard density (~50% fewer decorated tiles)
- Focus shifted to exhibit visibility

North sanctuary (rows 2-9) enhanced with:
- All checkerboard patterns removed
- Scattered large stone blocks in corners for worn/aged feel
- Plain stone base throughout

Combined with Plan 01's Entry and Central Hall work, the museum now has four distinct visual zones.
  </what-built>
  <how-to-verify>
1. Start the game and navigate to the ChatbotRuins scene
2. Walk through each zone and observe:

   **Entry (bottom):**
   - Should be welcoming with sparse decoration
   - Subtle threshold at exit approach

   **Central Hall (middle):**
   - Ceremonial border around ChatGPT statue
   - Clean floor near statue

   **Side Wings (left/right):**
   - Noticeably less busy than before
   - Exhibits should stand out more

   **North Sanctuary (top):**
   - Most plain/worn appearance
   - Scattered stone blocks suggest age
   - No checkerboard pattern

3. Overall impression:
   - Four zones should be distinguishable
   - Museum should feel like "ancient ruins" not generic room
   - All paths remain walkable

If game is not running:
- Run `npm run dev` or equivalent start command
- Navigate to the museum map in-game
  </how-to-verify>
  <resume-signal>Type "approved" if all four zones are visually distinct and feel like ruins, or describe issues</resume-signal>
</task>

</tasks>

<verification>
- [ ] Side wings have ~50% fewer decorated tiles
- [ ] North sanctuary has no checkerboard patterns (69-70, 77-78)
- [ ] Large stone blocks (68, 76) scattered in sanctuary corners
- [ ] All four zones visually distinguishable
- [ ] Museum feels like "ruined temple" not generic room
- [ ] All exhibit areas remain accessible
- [ ] JSON is valid and parseable
</verification>

<success_criteria>
1. Side galleries feel less cluttered, exhibits more visible
2. North sanctuary has worn/aged character
3. Four distinct zones perceptible when walking through museum
4. Human verification confirms "ruined temple museum" aesthetic achieved
</success_criteria>

<output>
After completion, create `.planning/phases/01-floor-enhancement/01-02-SUMMARY.md`
</output>
