---
phase: 01-floor-enhancement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - public/assets/tilemaps/json/room-chatbotruins.json
autonomous: false

must_haves:
  truths:
    - "Entry zone (rows 28-29) has distinct floor pattern with sparse decoration"
    - "Central hall around ChatGPT statue has ceremonial floor treatment"
    - "Exit path (row 29, cols 17-22) remains walkable with plain floor"
  artifacts:
    - path: "public/assets/tilemaps/json/room-chatbotruins.json"
      provides: "Updated ground layer with entry and central hall zones"
      contains: "layers[0].data with modified tile GIDs"
  key_links:
    - from: "ground layer data array"
      to: "visual tile rendering"
      via: "Phaser tilemap loader"
      pattern: "GID values 65-128 map to stone tileset"
---

<objective>
Create distinct floor zones for the museum's Entry and Central Hall areas.

Purpose: Transform the first impression (entry) and focal point (statue area) from monotonous checkerboard into visually distinct zones that guide player attention and suggest the "ruined temple" aesthetic.

Output: Modified room-chatbotruins.json with enhanced entry zone (rows 26-29) and ceremonial central hall floor (rows 10-13, cols 16-24).
</objective>

<execution_context>
@/Users/noahsark/.claude/get-shit-done/workflows/execute-plan.md
@/Users/noahsark/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-floor-enhancement/01-RESEARCH.md
@public/assets/tilemaps/json/room-chatbotruins.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance Entry Zone Floor</name>
  <files>public/assets/tilemaps/json/room-chatbotruins.json</files>
  <action>
Modify the ground layer (layers[0].data) for the entry zone (rows 26-29, cols 1-38).

**Key tile GIDs (stone tileset, firstgid=65):**
- 74: Plain center (base tile)
- 66: Top edge (border)
- 65, 67: Top corners
- 69-70, 77-78: Decorated 2x2 (use SPARINGLY - 1 per 6-8 tile area)

**Zone modifications:**

1. **Row 26 (transition row):** Add subtle threshold using top edge tile (66) at key points:
   - Index formula: 26 * 40 + col
   - Cols 17-22 (exit approach): Change from 74 to 66 to mark threshold
   - Keep rest of row as-is (74)

2. **Rows 27-28 (entry interior):**
   - Replace current dense checkerboard with sparser pattern
   - Row 27: Mostly 74, with ONE 2x2 dot pattern (69-70/77-78) around col 10 and col 30
   - Row 28: Mostly 74, matching sparse pattern
   - Index range: row * 40 + col for cols 1-38

3. **Row 29 (bottom/exit row):**
   - PRESERVE cols 17-22 as-is (exit path - currently 74, must stay 74)
   - Cols 0-16 and 23-39: Already has 82 (bottom edge) on row 28, row 29 is plain
   - Row 29 should remain plain 74 for walkability

**Do NOT modify:**
- Column 0 (left wall edge - 73)
- Column 39 (right wall edge - 75)
- Row 28 indices 1160-1199 are row 29 (0-indexed). Row 29 cols 17-22 = indices 1177-1182

**Calculate specific indices:**
- Row 26: indices 1040-1079 (26 * 40 = 1040)
- Row 27: indices 1080-1119 (27 * 40 = 1080)
- Row 28: indices 1120-1159 (28 * 40 = 1120, this is the wall bottom edge row)
- Row 29: indices 1160-1199 (29 * 40 = 1160)
  </action>
  <verify>
1. Read the modified JSON and verify:
   - Row 26 has 66 tiles at cols 17-22 (indices 1057-1062)
   - Rows 27-28 have fewer decorated tiles (69-70, 77-78) than before
   - Row 29 cols 17-22 remain as 74
2. Spot-check index calculations: index 1080 should be row 27 col 0
  </verify>
  <done>Entry zone rows 26-29 have sparser decoration with subtle threshold marking at the exit approach. Exit path remains plain and walkable.</done>
</task>

<task type="auto">
  <name>Task 2: Enhance Central Hall Floor Around Statue</name>
  <files>public/assets/tilemaps/json/room-chatbotruins.json</files>
  <action>
Modify the ground layer (layers[0].data) for the central hall around the ChatGPT statue.

**Statue location (from objects layer):** x=592, y=352, which is approximately cols 18-20, rows 11-13 (32px per tile).

**Key tile GIDs for ceremonial treatment:**
- 74: Plain center (base)
- 89-91: Hollow frame top row (TL, T, TR)
- 97-99: Hollow frame middle row (L, Center, R) - these are cross/intersection pieces
- 105-107: Hollow frame bottom row (BL, B, BR) - estimate, verify visually

**Zone modifications:**

1. **Create ceremonial border around statue area (rows 9-14, cols 16-24):**

   Row 9 (statue north border):
   - Index base: 9 * 40 = 360
   - Cols 16-24: indices 376-384
   - Pattern: [74, 89, 90, 90, 90, 90, 90, 90, 91] (frame top)
   - Actually, simplify: just use 66 (top edge) for subtle border

2. **Rows 10-12 (statue rows - clear path TO statue):**
   - Keep plain 74 directly under/around statue
   - Add edge tiles (73, 75) at cols 16 and 24 to frame the area

3. **Row 13 (statue south):**
   - Index base: 13 * 40 = 520
   - Cols 16-24: indices 536-544
   - Use bottom edge (82) or subtle border

4. **Simplified approach - use edge tiles to frame statue area:**
   - Row 9, cols 17-23: Change to 66 (top edge)
   - Row 14, cols 17-23: Change to 82 (bottom edge)
   - Rows 10-13, col 16: Keep 74 (walls handle framing)
   - Rows 10-13, col 24: Keep 74

**Remove current dot patterns in central area:**
   - Rows 10-11 currently have an extended dot pattern at cols 18-21
   - Replace with plain 74 to let the statue be the focal point
   - Row 10, cols 18-21: indices 418-421 -> change to 74
   - Row 11, cols 18-21: indices 458-461 -> change to 74

**Do NOT modify:**
- Statue tiles themselves (props layer, untouched)
- Wall openings at cols 15 and 24 (wall layer)
  </action>
  <verify>
1. Read modified JSON and verify:
   - Rows 10-11 no longer have decorated tiles (69-70, 77-78) at cols 18-21
   - Row 9 has top edge (66) tiles at cols 17-23 forming north border
   - Central area is cleaner, plain floor near statue
2. Index spot-check: 9 * 40 + 17 = 377 should be col 17 of row 9
  </verify>
  <done>Central hall has ceremonial floor treatment with subtle borders framing the statue area. Decorated tiles removed from directly around statue to reduce visual competition.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual Verification of Entry and Central Hall</name>
  <what-built>
Entry zone (rows 26-29) enhanced with:
- Sparser decoration (reduced checkerboard density)
- Subtle threshold marking at exit approach (row 26, cols 17-22)
- Preserved walkable exit path

Central hall (rows 9-14, cols 16-24) enhanced with:
- Ceremonial border framing the statue area
- Reduced decoration around statue for cleaner focal point
  </what-built>
  <how-to-verify>
1. Start the game and navigate to the ChatbotRuins scene
2. Look at the entry area (bottom of map):
   - Floor should be mostly plain with sparse decoration
   - Exit area should be clearly visible with subtle threshold
3. Walk to the ChatGPT statue in the center:
   - Floor around statue should be cleaner than before
   - Subtle border should frame the ceremonial area
4. Compare visual impression to before (should feel less monotonous)

If game is not running:
- Run `npm run dev` or equivalent start command
- Navigate to the museum map in-game
  </how-to-verify>
  <resume-signal>Type "approved" if zones look distinct, or describe visual issues to fix</resume-signal>
</task>

</tasks>

<verification>
- [ ] Entry zone (rows 26-29) has sparser tile decoration
- [ ] Exit path (row 29, cols 17-22) remains plain 74 tiles
- [ ] Central hall around statue has ceremonial border
- [ ] No decorated tiles compete with statue visual
- [ ] All wall edges (73, 75) preserved at columns 0 and 39
- [ ] JSON is valid and parseable
</verification>

<success_criteria>
1. Entry zone visually distinct from generic checkerboard
2. Central hall floor frames the statue as focal point
3. Player can still walk through all paths
4. Human verification confirms visual improvement
</success_criteria>

<output>
After completion, create `.planning/phases/01-floor-enhancement/01-01-SUMMARY.md`
</output>
